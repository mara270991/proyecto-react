{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\React\\\\coderhouse\\\\src\\\\components\\\\Orden\\\\Orden.js\";\nimport React, { useState, useContext } from 'react';\nimport ButtonCart from '../../components/ButtonCart/ButtonCart.js';\nimport { Formik } from \"formik\"; // Importamos el component <Formik />\n\nimport { CartContext } from '../../components/Context/CartContext.js';\nimport { getFirestore } from '../../firebase';\nimport * as firebase from 'firebase/app';\nimport \"./formulario.css\";\nimport 'firebase/firestore';\nimport { Container, Button, Form, FormGroup, Label, Input, Card, CardBody, CardHeader, FormFeedback } from \"reactstrap\";\n\nfunction Orden(props) {\n  const [cart] = React.useContext(CartContext);\n  const [inputs, setInputs] = useState({});\n  const [orderId, setOrderID] = useState();\n  const [total, setTotal] = useState({});\n  const price = cart.map(item => item.total);\n  const sum = price.reduce((a, b) => a + b, 0);\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"p-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Formik, {\n    initialValues: {\n      name: \"\",\n      email: \"\",\n      conEmail: \"\",\n      telefono: \"\"\n    },\n    validate: values => {\n      const errors = {}; // We need a name\n\n      if (!values.name) errors.name = \"No puede estar vacío\"; // We need a valid e-mail\n\n      if (!values.email) errors.email = \"No puede estar vacío\";else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)) errors.email = \"No es un email valido\";\n      const validacion = values.email;\n      const confirmacion = values.conEmail; // We need a valid e-mail\n\n      if (!values.conEmail) errors.conEmail = \"No puede estar vacío\";else if (validacion !== confirmacion) errors.conEmail = \"No es un igual\";else if (validacion !== confirmacion) alert('Los emails no son iguales'); // We need a valid e-mail\n\n      if (!values.telefono) errors.telefono = \"No puede estar vacío\";\n      return errors;\n    },\n    onSubmit: (values, {\n      setSubmitting\n    }) => {\n      setTimeout(() => {\n        const db = getFirestore();\n        const orders = db.collection(\"orders\");\n        console.log(cart);\n        orders.add({\n          buyer: values,\n          items: cart,\n          data: firebase.firestore.Timestamp.fromDate(new Date()),\n          total: cart.reduce((a, c) => a + c.product.precio * c.count, 0)\n        }).then(({\n          id\n        }) => {\n          setOrderID(id); //sucess\n\n          setSubmitting(false);\n        }).catch(error => {\n          console.log('Error add orders: ', error);\n        }).finally(() => {\n          console.log(orderId);\n        });\n      }, 250);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, props => {\n    const {\n      values,\n      errors,\n      touched,\n      handleChange,\n      handleBlur,\n      handleSubmit,\n      isSubmitting\n      /* y otras más */\n\n    } = props;\n    return /*#__PURE__*/React.createElement(Form, {\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, \"Form\"), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 19\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      name: \"name\",\n      placeholder: \"Woody Allen\",\n      invalid: errors.name && touched.name,\n      onChange: handleChange,\n      onBlur: handleBlur,\n      value: values.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(FormFeedback, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 19\n      }\n    }, errors.name)), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 19\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"email\",\n      name: \"email\",\n      placeholder: \"contoso@domain.com\",\n      invalid: errors.email && touched.email,\n      onChange: handleChange,\n      onBlur: handleBlur,\n      value: values.email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(FormFeedback, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 19\n      }\n    }, errors.email)), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 19\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"email\",\n      name: \"conEmail\",\n      placeholder: \"contoso@domain.com\",\n      invalid: errors.conEmail && touched.conEmail,\n      onChange: handleChange,\n      onBlur: handleBlur,\n      value: values.conEmail,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(FormFeedback, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 19\n      }\n    }, errors.email)), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"telefono\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 19\n      }\n    }, \"Telefono\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"number\",\n      name: \"telefono\",\n      placeholder: \"1565656565\",\n      invalid: errors.telefono && touched.telefono,\n      onChange: handleChange,\n      onBlur: handleBlur,\n      value: values.telefono,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(FormFeedback, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, errors.telefono)), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      disabled: isSubmitting,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, isSubmitting ? `Loading` : `Submit`), orderId ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 30\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"gracias mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 19\n      }\n    }, \" \\xA1Gracias por realizar la compra! \"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"orden\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 19\n      }\n    }, \"Orden: \", orderId)) : '');\n  }))));\n}\n\nexport default Orden;","map":{"version":3,"sources":["C:/xampp/htdocs/React/coderhouse/src/components/Orden/Orden.js"],"names":["React","useState","useContext","ButtonCart","Formik","CartContext","getFirestore","firebase","Container","Button","Form","FormGroup","Label","Input","Card","CardBody","CardHeader","FormFeedback","Orden","props","cart","inputs","setInputs","orderId","setOrderID","total","setTotal","price","map","item","sum","reduce","a","b","name","email","conEmail","telefono","values","errors","test","validacion","confirmacion","alert","setSubmitting","setTimeout","db","orders","collection","console","log","add","buyer","items","data","firestore","Timestamp","fromDate","Date","c","product","precio","count","then","id","catch","error","finally","touched","handleChange","handleBlur","handleSubmit","isSubmitting"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport ButtonCart from  '../../components/ButtonCart/ButtonCart.js';\r\nimport { Formik } from \"formik\"; // Importamos el component <Formik />\r\nimport { CartContext } from '../../components/Context/CartContext.js';\r\nimport {getFirestore} from '../../firebase';\r\nimport * as firebase from 'firebase/app';\r\nimport \"./formulario.css\"\r\nimport 'firebase/firestore';\r\nimport {\r\n  Container,\r\n  Button,\r\n  Form,\r\n  FormGroup,\r\n  Label,\r\n  Input,\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  FormFeedback,\r\n} from \"reactstrap\";\r\n\r\nfunction Orden(props) {\r\n  const [cart] = React.useContext(CartContext);\r\n  const [inputs, setInputs] = useState({});\r\n  const [orderId, setOrderID] = useState()\r\n  const [total, setTotal] = useState({});\r\n\r\n  const price = cart.map((item) => item.total);\r\n  const sum = price.reduce((a, b) => a + b,0);\r\n\r\n\r\n      return (\r\n  <Container className=\"p-5\">\r\n    <Card>\r\n      <CardHeader></CardHeader>\r\n      <CardBody>\r\n        <Formik\r\n          initialValues={{\r\n            name: \"\",\r\n            email: \"\",\r\n            conEmail: \"\",\r\n            telefono: \"\",\r\n          }}\r\n          validate={(values) => {\r\n            const errors = {};\r\n\r\n            // We need a name\r\n            if (!values.name) errors.name = \"No puede estar vacío\";\r\n\r\n            // We need a valid e-mail\r\n            if (!values.email) errors.email = \"No puede estar vacío\";\r\n            else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email))\r\n              errors.email = \"No es un email valido\";\r\n\r\n              const validacion = values.email;\r\n              const confirmacion = values.conEmail;\r\n              // We need a valid e-mail\r\n              if (!values.conEmail) errors.conEmail = \"No puede estar vacío\";\r\n              else\r\n              if (validacion !== confirmacion)\r\n                errors.conEmail = \"No es un igual\";\r\n                else\r\n                if(validacion !== confirmacion)\r\n                alert('Los emails no son iguales');\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n              // We need a valid e-mail\r\n              if (!values.telefono) errors.telefono = \"No puede estar vacío\";\r\n\r\n\r\n\r\n            return errors;\r\n          }}\r\n          onSubmit={(values, { setSubmitting }) => {\r\n            setTimeout(() => {\r\n\r\n                const db = getFirestore();\r\n                const orders = db.collection(\"orders\");\r\n\r\n                console.log(cart);\r\n                orders.add(\r\n                    {\r\n                    buyer: values,\r\n                    items: cart,\r\n                    data: firebase.firestore.Timestamp.fromDate(new Date()),\r\n                    total: cart.reduce((a,c) => (a+c.product.precio*c.count), 0),\r\n                  }\r\n                  ).then(({id})=>{\r\n                    setOrderID(id)//sucess\r\n                    setSubmitting(false);\r\n\r\n\r\n                  }).catch((error) =>{\r\n                    console.log('Error add orders: ', error);\r\n                 }).finally(() =>{\r\n                    console.log(orderId);\r\n                  });\r\n\r\n            }, 250);\r\n          }}\r\n        >\r\n          {(props) => {\r\n            const {\r\n              values,\r\n              errors,\r\n              touched,\r\n              handleChange,\r\n              handleBlur,\r\n              handleSubmit,\r\n              isSubmitting,\r\n              /* y otras más */\r\n            } = props;\r\n            return (\r\n              <Form onSubmit={handleSubmit}>\r\n                <h1>Form</h1>\r\n                <FormGroup>\r\n                  <Label for=\"name\">Name</Label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    placeholder=\"Woody Allen\"\r\n                    invalid={errors.name && touched.name}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    value={values.name}\r\n                  />\r\n                  <FormFeedback>{errors.name}</FormFeedback>\r\n                </FormGroup>\r\n                <FormGroup>\r\n                  <Label for=\"email\">Email</Label>\r\n                  <Input\r\n                    type=\"email\"\r\n                    name=\"email\"\r\n                    placeholder=\"contoso@domain.com\"\r\n                    invalid={errors.email && touched.email}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    value={values.email}\r\n                  />\r\n                  <FormFeedback>{errors.email}</FormFeedback>\r\n                </FormGroup>\r\n                <FormGroup>\r\n                  <Label for=\"email\">Email</Label>\r\n                  <Input\r\n                    type=\"email\"\r\n                    name=\"conEmail\"\r\n                    placeholder=\"contoso@domain.com\"\r\n                    invalid={errors.conEmail && touched.conEmail}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    value={values.conEmail}\r\n                  />\r\n                  <FormFeedback>{errors.email}</FormFeedback>\r\n                </FormGroup>\r\n                <FormGroup>\r\n                  <Label for=\"telefono\">Telefono</Label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    name=\"telefono\"\r\n                    placeholder=\"1565656565\"\r\n                    invalid={errors.telefono && touched.telefono}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    value={values.telefono}\r\n                  />\r\n                  <FormFeedback>{errors.telefono}</FormFeedback>\r\n                </FormGroup>\r\n\r\n                <Button type=\"submit\" disabled={isSubmitting}>\r\n                    {isSubmitting ? `Loading` : `Submit`}\r\n                  </Button>\r\n\r\n                  {orderId ? <div>\r\n                  <h1 className=\"gracias mt-4\"> ¡Gracias por realizar la compra! </h1>\r\n                  <p className=\"orden\" >Orden: {orderId}</p>\r\n                  </div> : ''}\r\n              </Form>\r\n            );\r\n          }}\r\n        </Formik>\r\n      </CardBody>\r\n    </Card>\r\n  </Container>\r\n);\r\n}\r\nexport default Orden;\r\n"]},"metadata":{},"sourceType":"module"}