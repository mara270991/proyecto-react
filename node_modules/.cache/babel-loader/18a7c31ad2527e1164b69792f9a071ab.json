{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\React\\\\coderhouse\\\\src\\\\components\\\\ItemDetailContainer\\\\ItemDetailContainer.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getFirestore } from '../../firebase';\nimport Loader from '../../components/loader/Loader';\nimport ItemDetail from \"../../components/ItemDetail/ItemDetail.js\";\nimport { NavLink } from 'react-router-dom';\nimport './product.css';\n\nfunction Product({\n  data\n}) {\n  const {\n    id\n  } = useParams();\n  const [size, setSize] = useState('');\n  const [product, setProduct] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [cart, setCart] = useContext(CartContext);\n\n  const onKeyDown = e => {\n    e.preventDefault();\n    let value = e.key;\n    const notAllowedChars = new RegExp('[aeiou]');\n\n    if (notAllowedChars.test(value)) {\n      e.stopPropagation();\n    } else {\n      setSize(size + value);\n    }\n  };\n\n  const handleSizeChange = event => {\n    event.preventDefault(); // `event` es un Synthetic Event de React.\n    // Puedo acceder al evento original con `event.nativeEvent`.\n\n    console.log(event.nativeEvent.target.value); // Pero React ya tiene los valores más comunes definidos dentro de este event.\n\n    setSize(event.target.value);\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    const db = getFirestore();\n    const itemCollection = db.collection('items');\n    const item = itemCollection.doc(id);\n    item.get().then(doc => {\n      if (!doc.exists) {\n        console.log(\"Item does not exist!\");\n        return true;\n      }\n\n      const dataQuery = doc.data();\n      console.log(dataQuery);\n      setProduct({\n        id: doc.id,\n        ...doc.data()\n      });\n    }).catch(error => {\n      console.log('Error searching item: ', error);\n    }).finally(() => {\n      setLoading(false);\n    });\n  }, [id]);\n  useEffect(() => {\n    console.log(size);\n  }, [size]);\n\n  const renderProduct = () => /*#__PURE__*/React.createElement(\"p\", {\n    className: \"Product-Description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, product.description); // Set the Cart Context with the added product\n\n\n  const addToCart = () => {\n    setCart(currentCart => [...currentCart, product]);\n  };\n\n  useEffect(() => {\n    console.log(cart);\n  }, [cart]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, loading && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 19\n    }\n  }), !loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Product\",\n    style: {\n      \"display\": \"flex\",\n      \"justifyContent\": \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"Product-Title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, product.title), /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"product\",\n    className: \"Product-Image\",\n    src: product.img,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }), renderProduct(), /*#__PURE__*/React.createElement(Button, {\n    styled: true,\n    onClick: addToCart,\n    sign: 'Add to Cart',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(NavLink, {\n    to: '/cart',\n    className: \"ButtonLink\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, cart.length, \" items Added. Go to Checkout\")));\n}\n\nexport default Product;","map":{"version":3,"sources":["C:/xampp/htdocs/React/coderhouse/src/components/ItemDetailContainer/ItemDetailContainer.js"],"names":["React","useEffect","useState","useParams","getFirestore","Loader","ItemDetail","NavLink","Product","data","id","size","setSize","product","setProduct","loading","setLoading","cart","setCart","useContext","CartContext","onKeyDown","e","preventDefault","value","key","notAllowedChars","RegExp","test","stopPropagation","handleSizeChange","event","console","log","nativeEvent","target","db","itemCollection","collection","item","doc","get","then","exists","dataQuery","catch","error","finally","renderProduct","description","addToCart","currentCart","title","img","length"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getFirestore } from '../../firebase';\r\nimport Loader from '../../components/loader/Loader';\r\nimport ItemDetail from \"../../components/ItemDetail/ItemDetail.js\";\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport './product.css';\r\n\r\n\r\nfunction Product({ data }) {\r\n  const { id } = useParams();\r\n  const [size, setSize] = useState('');\r\n  const [product, setProduct] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [cart, setCart] = useContext(CartContext);\r\n\r\n  const onKeyDown = e => {\r\n    e.preventDefault();\r\n    let value = e.key;\r\n    const notAllowedChars = new RegExp('[aeiou]');\r\n    if (notAllowedChars.test(value)) {\r\n      e.stopPropagation();\r\n    } else {\r\n      setSize(size + value);\r\n    }\r\n  }\r\n\r\n  const handleSizeChange = (event) => {\r\n    event.preventDefault();\r\n    // `event` es un Synthetic Event de React.\r\n    // Puedo acceder al evento original con `event.nativeEvent`.\r\n    console.log(event.nativeEvent.target.value);\r\n    // Pero React ya tiene los valores más comunes definidos dentro de este event.\r\n    setSize(event.target.value);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    const db = getFirestore()\r\n    const itemCollection = db.collection('items');\r\n    const item = itemCollection.doc(id);\r\n\r\n    item.get()\r\n    .then((doc) => {\r\n      if (!doc.exists) {\r\n        console.log(\"Item does not exist!\");\r\n        return true;\r\n      }\r\n      const dataQuery = doc.data();\r\n      console.log(dataQuery);\r\n      setProduct({ id: doc.id, ...doc.data() });\r\n    })\r\n    .catch((error) => {\r\n      console.log('Error searching item: ', error);\r\n    })\r\n    .finally(() => {\r\n      setLoading(false);\r\n    })\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    console.log(size)\r\n  }, [size]);\r\n\r\n\r\n  const renderProduct = () => (\r\n\r\n    <p className='Product-Description'>\r\n      {product.description}\r\n    </p>\r\n  )\r\n\r\n  // Set the Cart Context with the added product\r\n  const addToCart = () => {\r\n    setCart(currentCart => [...currentCart, product])\r\n  }\r\n\r\n  useEffect(() => {\r\n    console.log(cart);\r\n  }, [cart]);\r\n\r\n  return(\r\n    <>\r\n      {loading && <Loader />}\r\n      {!loading &&\r\n        <div className=\"Product\" style={{\"display\": \"flex\", \"justifyContent\": \"center\"}}>\r\n          <h2 className=\"Product-Title\">{product.title}</h2>\r\n          <img\r\n            alt='product'\r\n            className='Product-Image'\r\n            src={product.img}\r\n          />\r\n          {renderProduct()}\r\n          <Button\r\n            styled={true}\r\n            onClick={addToCart}\r\n            sign={'Add to Cart'}\r\n          />\r\n          <NavLink\r\n            to={'/cart'}\r\n            className=\"ButtonLink\"\r\n          >{cart.length} items Added. Go to Checkout</NavLink>\r\n        </div>\r\n      }\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Product;\r\n"]},"metadata":{},"sourceType":"module"}