{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\React\\\\coderhouse\\\\src\\\\components\\\\Orden\\\\Orden.js\";\nimport React, { useState, useContext } from 'react';\nimport { Col, Button, Form, FormGroup, Label, Input } from 'reactstrap';\nimport { CartContext } from '../../components/Context/CartContext.js';\nimport { getFirestore } from '../../firebase';\nimport * as firebase from 'firebase/app';\nimport 'firebase/firestore';\n\nfunction Orden(props) {\n  const [cart] = useContext(CartContext);\n  const [phone, setPhone] = useState();\n  const [email, setEmail] = useState();\n  const [name, setName] = useState();\n  const [orderId, setOrderID] = useState();\n  const price = cart.map(item => item.total);\n  const sum = price.reduce((a, b) => a + b, 0);\n\n  function fire(e) {\n    e.preventDefault();\n    const db = getFirestore();\n    const orders = db.collection('orders');\n    console.log(cart);\n    orders.add({\n      buyer: {\n        name,\n        email,\n        phone\n      },\n      items: cart,\n      data: firebase.firestore.Timestamp.fromDate(new Date()),\n      total: sum\n    }).then(({\n      id\n    }) => {\n      setOrderID(id); //sucess\n\n      clearState();\n    }).catch(error => {\n      console.log('Error add orders: ', error);\n    }).finally(() => {\n      console.log(orderId);\n    });\n  }\n\n  ;\n\n  function clearState() {\n    setEmail('');\n    setName('');\n    setPhone('');\n  }\n\n  if (cart.length === 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 14\n      }\n    }, \"No hay elementos en el carrito\");\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      style: {\n        margin: '0 0 0 5vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 15\n      }\n    }, \"Datos para la compra\"), /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"exampleEmail\",\n      sm: 8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 19\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Col, {\n      sm: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      value: email,\n      onChange: e => setEmail(e.target.value),\n      type: \"email\",\n      name: \"email\",\n      id: \"exampleEmail\",\n      placeholder: \"example@test.com\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"phone\",\n      sm: 8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 19\n      }\n    }, \"Phone\"), /*#__PURE__*/React.createElement(Col, {\n      sm: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      value: phone,\n      onChange: e => setPhone(e.target.value),\n      type: \"number\",\n      name: \"number\",\n      id: \"exampleNumber\",\n      placeholder: \"11447856773\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"name\",\n      sm: 8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 19\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(Col, {\n      sm: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      value: name,\n      onChange: e => setName(e.target.value),\n      type: \"name\",\n      name: \"name\",\n      id: \"name\",\n      placeholder: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(FormGroup, {\n      check: true,\n      row: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      sm: {\n        size: 10,\n        offset: 2\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"dark\",\n      onClick: e => fire(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 19\n      }\n    }, \"Generar Orden\"))), orderId ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 26\n      }\n    }, \"Order ID: \", orderId) : ''));\n  }\n}\n\nexport default Orden;","map":{"version":3,"sources":["C:/xampp/htdocs/React/coderhouse/src/components/Orden/Orden.js"],"names":["React","useState","useContext","Col","Button","Form","FormGroup","Label","Input","CartContext","getFirestore","firebase","Orden","props","cart","phone","setPhone","email","setEmail","name","setName","orderId","setOrderID","price","map","item","total","sum","reduce","a","b","fire","e","preventDefault","db","orders","collection","console","log","add","buyer","items","data","firestore","Timestamp","fromDate","Date","then","id","clearState","catch","error","finally","length","margin","target","value","size","offset"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { Col, Button, Form, FormGroup, Label, Input} from 'reactstrap';\r\nimport { CartContext } from '../../components/Context/CartContext.js';\r\nimport {getFirestore} from '../../firebase';\r\nimport * as firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nfunction Orden(props) {\r\n  const [cart] = useContext(CartContext);\r\n  const [phone, setPhone] = useState();\r\n  const [email, setEmail] = useState();\r\n  const [name, setName] = useState();\r\n  const [orderId, setOrderID] = useState()\r\n  const price = cart.map((item) => item.total);\r\n  const sum = price.reduce((a, b) => a + b,0);\r\n  function fire(e){\r\n    e.preventDefault();\r\n    const db = getFirestore();\r\n    const orders = db.collection('orders');\r\n    console.log(cart);\r\n    orders.add(\r\n        {\r\n        buyer: {name, email, phone},\r\n        items: cart,\r\n        data: firebase.firestore.Timestamp.fromDate(new Date()),\r\n        total: sum,\r\n      }\r\n      ).then(({id})=>{\r\n        setOrderID(id)//sucess\r\n        clearState()\r\n      }).catch((error) =>{\r\n        console.log('Error add orders: ', error);\r\n     }).finally(() =>{\r\n        console.log(orderId);\r\n      });\r\n    };\r\n  function clearState(){\r\n       setEmail('')\r\n        setName('')\r\n        setPhone('')\r\n      }\r\n    if(cart.length === 0){\r\n      return <div>No hay elementos en el carrito</div>\r\n    } else{\r\n    return(<div>\r\n            <Form style={{\r\n                margin: '0 0 0 5vw'\r\n              }}>\r\n              <Label>Datos para la compra</Label>\r\n              <FormGroup row>\r\n                  <Label for=\"exampleEmail\" sm={8}>Email</Label>\r\n                  <Col sm={6}>\r\n                  <Input value={email} onChange={(e)=>setEmail(e.target.value)} type=\"email\" name=\"email\" id=\"exampleEmail\" placeholder=\"example@test.com\" />\r\n                  </Col>\r\n              </FormGroup>\r\n              <FormGroup row>\r\n                  <Label for=\"phone\" sm={8}>Phone</Label>\r\n                  <Col sm={6}>\r\n                  <Input value={phone} onChange={(e)=>setPhone(e.target.value)} type=\"number\" name=\"number\" id=\"exampleNumber\" placeholder=\"11447856773\" />\r\n                  </Col>\r\n              </FormGroup>\r\n              <FormGroup row>\r\n                  <Label for=\"name\" sm={8}>Name</Label>\r\n                  <Col sm={6}>\r\n                  <Input value={name} onChange={(e)=>setName(e.target.value)} type=\"name\" name=\"name\" id=\"name\" placeholder=\"\" />\r\n                  </Col>\r\n              </FormGroup>\r\n              <FormGroup check row>\r\n                  <Col sm={{ size: 10, offset: 2 }}>\r\n                  <Button color='dark' onClick={(e)=>fire(e)}>Generar Orden</Button>\r\n                  </Col>\r\n              </FormGroup>\r\n              {orderId ? <div>\r\n              Order ID: {orderId}\r\n              </div> : ''}\r\n              </Form>\r\n        </div>)\r\n    }\r\n}\r\nexport default Orden;\r\n"]},"metadata":{},"sourceType":"module"}