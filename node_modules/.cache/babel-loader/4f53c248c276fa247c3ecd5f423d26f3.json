{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\React\\\\coderhouse\\\\src\\\\components\\\\Orden\\\\Orden.js\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport { getFirestore } from '../../firebase';\nimport { CartContext } from '../../components/Context/CartContext.js';\nimport \"./formulario.css\";\nimport { Redirect } from \"react-router-dom\";\n\nconst Orden = props => {\n  const db = getFirestore();\n  const orders = db.collection(\"orders\");\n  const [loading, setLoading] = useState(false);\n  const [order, setOrderId] = useState();\n  const [error, setError] = useState();\n  const [cart] = React.useContext(CartContext);\n  const [inputs, setInputs] = useState({});\n  const [total, setTotal] = useState({});\n\n  const handleChange = e => {\n    // Con esto accederemos a las propiedades del evento de forma asíncrona\n    e.persist(); // Ahora llamamos a la función, le pasamos el estado actual y le pasamos también el nombre del campo y su valor. Lo guardará justamente como un objeto\n\n    setInputs(inputs => ({ ...inputs,\n      [e.target.name]: e.target.value,\n      [e.target.apellido]: e.target.value\n    }));\n  };\n\n  function Footer(props) {\n    return /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"totalPrice\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 12\n      }\n    }, \" Total: $\", props.total, \" \");\n  }\n\n  function renderRedirect() {\n    window.location.href = \"/gracias\";\n  }\n\n  const newOrder = {\n    buyer: inputs,\n    items: cart,\n    total: cart.reduce((a, c) => a + c.product.precio * c.count, 0)\n  }; // Set the Cart Context with the added product\n\n  const enviar = () => {\n    orders.add(newOrder).then(({\n      id\n    }) => {\n      setOrderId(id);\n      renderRedirect();\n    }).catch(err => {\n      setError(err);\n    }).finally(() => {\n      setLoading(false);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"tituloOrden mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, \" \\xA1\\xDAltimo paso! \"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"formulario\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, \"Nombre\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    className: \"form-control\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"apellido\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, \"Apellido\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"apellido\",\n    name: \"apellido\",\n    className: \"form-control\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Footer, {\n    total: cart.reduce((a, c) => a + c.product.precio * c.count, 0),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary botonOrden mt-3\",\n    onClick: enviar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, \" Enviar\"));\n};\n\nexport default Orden;","map":{"version":3,"sources":["C:/xampp/htdocs/React/coderhouse/src/components/Orden/Orden.js"],"names":["React","useEffect","useState","useContext","getFirestore","CartContext","Redirect","Orden","props","db","orders","collection","loading","setLoading","order","setOrderId","error","setError","cart","inputs","setInputs","total","setTotal","handleChange","e","persist","target","name","value","apellido","Footer","renderRedirect","window","location","href","newOrder","buyer","items","reduce","a","c","product","precio","count","enviar","add","then","id","catch","err","finally"],"mappings":"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","sourcesContent":["\r\nimport React, {useEffect, useState, useContext} from 'react';\r\nimport { getFirestore } from '../../firebase';\r\nimport { CartContext } from '../../components/Context/CartContext.js';\r\nimport \"./formulario.css\"\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\n\r\n\r\nconst Orden = (props) => {\r\n  const db = getFirestore();\r\n  const orders = db.collection(\"orders\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [order, setOrderId] = useState();\r\n  const [error, setError] = useState();\r\n  const [cart] = React.useContext(CartContext);\r\n  const [inputs, setInputs] = useState({});\r\n  const [total, setTotal] = useState({});\r\n\r\n\r\n  const handleChange = e => {\r\n          // Con esto accederemos a las propiedades del evento de forma asíncrona\r\n          e.persist()\r\n          // Ahora llamamos a la función, le pasamos el estado actual y le pasamos también el nombre del campo y su valor. Lo guardará justamente como un objeto\r\n          setInputs(inputs => ({ ...inputs, [e.target.name]: e.target.value, [e.target.apellido]: e.target.value }))\r\n  }\r\n\r\n\r\n  function Footer(props){\r\n    return <h2 className=\"totalPrice\"> Total: ${props.total} </h2>\r\n  }\r\n\r\n  function renderRedirect(){\r\n   window.location.href = \"/gracias\";\r\n}\r\n  const newOrder = {\r\n      buyer: inputs,\r\n      items : cart,\r\n      total : cart.reduce((a,c) => (a+c.product.precio*c.count), 0),\r\n  };\r\n\r\n  // Set the Cart Context with the added product\r\n  const enviar = () => {\r\n    orders.add(newOrder).then(({id}) =>{\r\n      setOrderId(id);\r\n    renderRedirect();\r\n    }).catch(err => {\r\n      setError(err);\r\n    }).finally(() =>{\r\n      setLoading(false);\r\n    })  }\r\n\r\n\r\n  return (\r\n      <div>\r\n      <p className=\"tituloOrden mt-3\"> ¡Último paso! </p>\r\n      <form className=\"formulario\">\r\n          <label htmlFor='name'>Nombre</label>\r\n          <input type='text' id=\"name\" name='name' className=\"form-control\" onChange={handleChange} />\r\n          <label htmlFor='apellido'>Apellido</label>\r\n          <input type='text' id=\"apellido\" name='apellido' className=\"form-control\" onChange={handleChange} />\r\n      </form>\r\n      <Footer total={cart.reduce((a,c) => (a+c.product.precio*c.count), 0)} />\r\n\r\n      <button className=\"btn btn-primary botonOrden mt-3\" onClick={enviar}> Enviar</button>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Orden;\r\n"]},"metadata":{},"sourceType":"module"}